
{% extends "core/base.html" %}
{% load render_table from django_tables2 %}
{% load django_tables2 %}
{% load static %}

{% load bootstrap4 %}       {# import bootstrap4/bootstrap3 #}
{% bootstrap_css %}         {# Embed Bootstrap CSS #}
{% bootstrap_javascript jquery='full' %}  {# Embed Bootstrap JS+jQuery #}
{{ form.media }} 

{% block content %}
<!doctype html>
<style>
  #btnReglamento{
    display: flex;
    align-content: center;
    transform:translate(-15vh,0);
    width:50%;
  }
.modalmask {
    position: fixed;
    font-family: Arial, sans-serif;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: rgba(0,0,0,0.8);
    z-index: 99999;
    opacity:0;
    -webkit-transition: opacity 400ms ease-in;
    -moz-transition: opacity 400ms ease-in;
    transition: opacity 400ms ease-in;
    pointer-events: none;
    max-height: calc(100vh - 210px);
    overflow-y: auto;
}
.modalmask:target {
    opacity:1;
    pointer-events: auto;
}

/*Formato de la ventana*/
.modalbox{
    width: 400px;
    position: relative;
    padding: 5px 20px 13px 20px;
    background: #fff;
    border-radius:3px;
    -webkit-transition: all 500ms ease-in;
    -moz-transition: all 500ms ease-in;
    transition: all 500ms ease-in;
     
}

/*Movimientos*/
.movedown {
    margin: 0 auto;
}
.rotate {
    margin: 10% auto;
    -webkit-transform: scale(-5,-5);
    transform: scale(-5,-5);
}
.resize {
    margin: 10% auto;
    width:0;
    height:0;
 
}
.modalmask:target .movedown{       
    margin:10% auto;
}
.modalmask:target .rotate{     
    transform: rotate(360deg) scale(1,1);
        -webkit-transform: rotate(360deg) scale(1,1);
}
 
.modalmask:target .resize{
    width:400px;
    height:200px;
}

/*Boton de cerrar*/
.close {
    background: #606061;
    color: #FFFFFF;
    line-height: 25px;
    position: absolute;
    right: 1px;
    text-align: center;
    top: 1px;
    width: 24px;
    text-decoration: none;
    font-weight: bold;
    border-radius:3px;
 
}
 
.close:hover {
    background: #FAAC58;
    color:#222;
}

@media (min-width:768px){
  .pika-single{
   color: black;
}
  .zona-box {
      display:flex;
      flex-direction: row;
      width: 80%;
      margin-left: auto;
      margin-right: auto;
  }
  .container-activos{
      display:flex;
      flex-direction: row;
      align-items:center;
      justify-content:space-between;
      padding-top: 20px;
      margin-left:2vw;
      margin-right: 2vw ;
      margin:auto;
      width:80%;
  }
  .fecha-box{
    display: flex;
    flex-direction: row;
    align-content: center;
    width: 80%;
    
  }
  form{
    width: 80%;
  }
  
  #btnReglamento{
  transform:translate(35vh,0);
  }
 
  .table {
  border: 1px solid #ccc;
  border-collapse: collapse;
  margin: 0;
  padding: 20;
  width: 100%;
}
table caption {
  font-size: 1em;
  margin: .5em 0 .75em;
}

table tr {
  background-color: #f8f8f8;
  border: 1px solid #ddd;
  padding: .35em;
  /* display: flex; */
  /* flex-direction: row; */
}

table th,
table td {
  padding: .625em;
  text-align: center;
  
}

table th {
  font-size: .85em;
  letter-spacing: .1em;
  text-transform: uppercase;
}
.card{
  width: 100%;
  height: 10px;
  }
  .card-fecha{
    display:flex;
    flex-direction: row;
    align-items: center;
    width: 200px;
  
  } 
  .subtitulo{
    display:flex;
    flex-direction:row;
    font-size: calc(4px + 1vw);
    margin: auto;color:black;
    transform:translate(-15vh,0)
  }
  .titulo{
    display:flex;
    flex-direction:row ;
    align-items: center;
    justify-content: center;
    transform:translate(15vh,0); 
  }
  .usuario{
    color:darkred;
    width:180px;
    margin-top:10px;
    transform:translate(-20vw,0);
  }
  .card-content{
    margin-left: 50px;
    display:flex;
    align-items: center;
    width: 100%;
    transform:translate(6vh,0);
  }
  .fecha-box{
    display: flex;
    flex-direction: row;
    align-items: center;
    /* width: 18%;
    margin-left: 97px; */
  }
  .mensaje{
    width: 100%;
    margin-left: auto;
    margin-left: auto;
  }
  .filtro{
    display: flex;
    flex-direction: row;
    align-items: center;
  }
  .btn-nuevo{
    display:flex;
    flex-direction: row;
    align-items: center;
  }
}

@media screen and (max-width: 600px) {
  #btnReglamento{
    margin-top: 10px;
  transform:translate(6vh,0);
  }
  table caption {
    font-size: 1.3em;
  }
  table thead {
    border: none;
    clip: rect(0 0 0 0);
    height: .5px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: .5px;
  }
  .table td, .table th {
    padding: 0.15rem;
  }
  table tr {
    border-bottom: 3px solid #ddd;
    display: block;
    margin-bottom: .625em;
  }
  table th{
    visibility: hidden;
  }
    
  table td {
    border-bottom: 1px solid #ddd;
    display: block;
    font-size: .8em;
    text-align: right;
  }
  
  table td::before {
    content: attr(data-label);
    float: left;
    font-weight: bold;
    text-transform: uppercase;
  }
  
  table td:last-child {
    border-bottom: 0;
  } 

body {
  font-family: "Open Sans", sans-serif;
  line-height: 1.25;
}
.card-content {
  display:flex;
  flex-direction: column;
  width: 100%;
  }
  .card-fecha{
    margin-top: 20px;
    display:flex;
    flex-direction: column;
    align-items: center;
  }
.titulo{
    display:flex;
    flex-direction:column ;
    align-content: center; 

  }
.container-activos{
    display:flex;
    flex-direction: column;
    align-items: center;
    padding-top: 20px;
    margin-left:2vw;
    margin-right: 2vw ;
    margin:auto;
    width:80%;
  }
  .filtro{
    display: flex;
    flex-direction: column;
    margin-top: 20px;
    align-content: center;
  }
  #btnNuevo{
    transform: translate(0px);
    margin-top: 10px;
  }
  .btn-nuevo{
    display:flex;
    flex-direction: row;
    align-items: center;
  }
  
  #btnFiltrar{
    transform: translate(50px);
  }
  .fecha-box{
    display: flex;
    flex-direction: column;
    align-content: center;
    width: 80%;
    
  }
  }

  @media (max-width:320px){
  .zona-box {
      display:flex;
      flex-direction: column;
  }  
  .fecha-box{
    display: flex;
    flex-direction: row;
    align-content: center;
    width: 80%;
    margin-left: 97px;
  }
  #btnNuevo{
    display:flex;
    transform:translate(35vh,0);
  }
  .foto{
    margin-left: 1vh;
  }
  .card-content {
  display:flex;
  flex-direction: column;
  }
  .filtro{
    display: flex;
    flex-direction: column;
    margin-top: 20px;
  }
  .container-activos{
    display: flex;
    flex-direction: column;
  }
  .card-fecha{
    display: flex;
    flex-direction: column;
    width: 80%;
  }
  .datepicker-modal {
  transform: scale(0.4);
}
  }

</style>
<head>
  <div class="navbar-fixed">  
    <nav>
      <div class="nav-wrapper">
        <a href="#!" class="brand-logo" style="font-size: calc(7px + .8vw);transform:translate(1vw,0);"><i class="material-icons">people</i> RESERVAS ZONAS COMUNES</a>       
        <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
        <ul class="right hide-on-med-and-down">
            <li><a href="{% url 'user_home' tipo_usuario %}">Regresar</a></li>
        </ul>
      </div>
    </nav>  
  </div>    
  <ul class="sidenav" id="mobile-demo">
      <li><a href="{% url 'user_home' tipo_usuario %}">Regresar</a></li>
  </ul>
</head>


<body>

<div class="container-activos" style="background-color: aliceblue;width:80%">
    <div>
      <h6>Usuario: {{user}}</h6>
    </div>
    <div class="fecha-box" >
      <form action="{% url 'reserva_zonas_comunes' id=idzona %}" method="GET" value="{{request.GET.q}}">
        <div class="card-content white-text" style="width:100%">
          <div class="card-fecha" >
            <div><label style="color:brown;font-size: calc(4px + 1.2vh)">Fecha:</label></div>
            <div><input style="color:black;transform: translate(12px)" class="datepicker" id='pickdate' type="date" name="q" value="{{request.GET.q}}" ></div>
          </div>
          <div class="filtro">
            <div style="display:flex;align-content: center;"><input  id="btnFiltrar" class="btn btn-primary" type="submit" name="submit" value="Filtrar Fecha"/></div>
            <div id="btnReglamento" style="transform: translate(20px);"><a  class="btn btn-primary" href="#modal2">Reglamento</a></div>
            <div class="btn-nuevo">
              <div style="display:flex;color:black;transform: translate(40px);">Nueva Reserva</div>
              <div><a id ="btnNuevo" type="submit" style="transform: translate(60px);" class="btn-floating btn-short waves-effect waves-light blue" href="{% url 'crear_reserva_zonas_comunes' idzona %}" value="crear" ><i class="material-icons">add</i></a></div></div>
            </div>
          </div>
        </div>
      </form>
    </div>
</div>  
    
  
<div class="zona-box" >
    <div class="table" style="overflow-x:auto;">
        <table style="width:100%;">
        {% if reservas %}  
          <tr>
            <th scope="col">Fecha.</th>
            <th scope="col">Hora Inic.</th>
            <th scope="col">Hora Fin.</th>
            <th scope="col">Pagado</th>
            <th scope="col">Confirmada</th>
            <th scope="col">Pagar</th>
            <th scope="col">Anexo</th>
            {% if tipo_usuario == 1 %}
            <th scope="col">Editar</th>
            <th scope="col">Borrar</th>
            <th scope="col">Confirmar</th>
            {% endif %}
          </tr>
          
            {% for reserva in reservas %}
              <tr>
                <td data-label="Fecha">{{reserva.fecha}}</td>
                <td data-label="Hora Inic.">{{reserva.hora_inicio}}</td>
                <td data-label="Hora Fin.">{{reserva.hora_final}}</td>
                {% if reserva.estado == 1 %}
                <td style="background-color: chartreuse;" data-label="Pagado">Si</td>
                {% else %}
                <td data-label="Pagado">No</td>
                {% endif %}
                {% if reserva.confirmada == 1 %}
                <td style="background-color: chartreuse;" data-label="Confirmada">Si</td>
                {% else %}
                <td data-label="Confirmada">No</td>
                {% endif %}
                 <td data-label="Pagar"><a id="BtnPagar" type="button" class="btn-floating btn-short waves-effect waves-light brown" href="{% url "pagar_reserva" reserva.id %}" value="borrar" style="color:red"><i class="material-icons">$</i></a></td>
                <td data-label="Anexo"><a id="BtnAnexos" type="button" class="btn-floating btn-short waves-effect waves-light green" href="{% url "upload:anexo_pago_reserva" reserva.id %}" value="editar" style="color:red"><i class="material-icons">add_circle</i></a></td>
                {% if tipo_usuario == 1 %}
                  <td data-label="Editar"><a id="BtnEditar" type="button" class="btn-floating btn-short waves-effect waves-light orange" href="{% url "edita_reserva_zonas_comunes" pk=reserva.id %}" value="editar" style="color:red"><i class="material-icons">edit</i></a></td>   
                  <td data-label="Borrar"><a id="BtnBorrar" type="button" class="btn-floating btn-short waves-effect waves-light red" href="{% url "borra_reserva_zonas_comunes" pk=reserva.id %}" value="editar" style="color:red"><i class="material-icons">delete</i></a></td>      
                  <td data-label="Borrar"><a id="BtnConfirma" type="button" class="btn-floating btn-short waves-effect waves-light magenta" href="{% url "confirma_reserva_zonas_comunes" reserva.id %}" value="editar" style="color:red"><i class="material-icons">check</i></a></td>                        
                {% endif %}  
              </tr>
            {% endfor %}
        </table>    
        {% else %}
            <div class="jumbotron">
              <h3 class="blink-mensaje" style="font-size: calc(12px + 1vw);margin-left:auto;margin-right:auto;width: 30%;" >No hay reservas ese día</h3>
            </div>
        {% endif %}
    </div>
  </div>

<!-- <div id="reglamento" class="modal">
  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">&times;</span>
  </button>
  <div class="modal-content">
      <h4>Reglamento</h4>
        {{observaciones|lower|safe|capfirst}}
  </div>
</div> -->
<div id="modal2" class="modalmask">
  <div class="modalbox rotate">
      <a href="#close" title="Close" class="close">X</a>
      <h2>Reglamento</h2>
      {% for r in zona %}
        {{r.observaciones|lower|safe|capfirst}}
      {% endfor %}  
      {{observaciones|lower|safe|capfirst}}
  </div>
</div>

</body>

</html>

{% block javascript %}
<script>

$(document).ready(function(){
  $('[data-toggle="tooltip"]').tooltip();
    });

$(document).ready(function(){
  $('.sidenav').sidenav();
  });

var currYear = (new Date()).getFullYear();

$(document).ready(function(){
  $('#fecha_filtro').datepicker();
  }
);
</script>
{% endblock %}
{% endblock %}