<!DOCTYPE html>
<html lang="es">
{% extends "core/base.html" %}
{% comment %} {% load material_form %}
{% form form=form %}{% endform %} {% endcomment %}
{% load static %}
{% block content %}

<title>{% block tittle %}Administrador | CONDOMINIUM{% endblock %}</title>

<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
      Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  }
  
  .main-container {
    padding: 30px;
  }
  
  /* HEADING */
  
  .heading {
    text-align: center;
  }
  
  .heading__title {
    font-weight: 100;
    padding-top: 10px;
  }
  
  .heading__credits {
    margin: 10px 0px;
    color: #888888;
    font-size: 15px;
    transition: all 0.5s;
  }
  
  .heading__link {
    text-decoration: none;
  }
  
  .heading__credits .heading__link {
    color: inherit;
  }
  
  /* CARDS */
  
  .cards {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
  }
  
  .card {
    margin: 20px;
    padding: 20px;
    width: 300px;
    height: 300px;
    min-height: 100px;
    display: grid;
    grid-template-rows: 20px 50px 1fr 50px;
    border-radius: 10px;
    box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.25);
    transition: all 0.2s;
  }
  
  .card:hover {
    box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.4);
    transform: scale(1.01);
  }
  
  .card__link,
  .card__exit,
  .card__icon {
    position: relative;
    text-decoration: none;
   /*  color: rgba(255, 255, 255, 0.9); */
  }
  
  .card__link::after {
    position: absolute;
    top: 25px;
    left: 0;
    content: "";
    width: 0%;
    height: 3px;
    background-color: rgba(255, 255, 255, 0.6);
    transition: all 0.5s;
  }
  
  .card__link:hover::after {
    width: 100%;
  }
  
   
  .card-1 {
    
    background: radial-gradient(#1fe4f5, #3fbafe);
  }
  
  .card-4 {
    background: radial-gradient(#fbc1cc, #fa99b2);
  }
  
  .card-3 {
    background: radial-gradient(#76b2fe, #b69efe);
  }
  
  .card-2 {
    background: radial-gradient(#60efbc, #58d5c9);
  }
  
  .card-5 {
    background: radial-gradient(#f588d8, #c0a3e5);
  }
  
  /* RESPONSIVE */
  
  @media (max-width: 1600px) {
    .cards {
      justify-content: center;
    }
  }
  h2{
    font-size: 1rem;
  }
  body { padding-top:20px; }
    .panel-body .btn:not(.btn-block) { width:120px;margin-bottom:10px; }

    .sidenav li>a {padding:0 32px !important}
      .collapsible-body>ul>li>a {
        padding: 0 48px !important;
        font-weight: 400 !important;
  }
  </style>

<body>
    <div class="navbar-fixed">
      <nav>
        <div class="nav-wrapper">
          <a style="font-size: calc(12px + 1vw);transform:translate(3vw,0)" href="#!" class="brand-logo"><i class="material-icons">face</i>Administrador</a>
          
          <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
          <ul class="right hide-on-med-and-down">
            <li><a href="{% url 'activos_fijos' %}">Activos Fijos</a></li>
            <li><a href="{% url 'proveedores' %}">Proveedores</a></li>
            <li><a href="{% url 'autorizaciones' id=1 %}">Autorizaciones</a></li>
            <li><a href="{% url 'lista' %}">PQR</a></li>
            <li><a href="{% url 'pagina_consejo' %}">Consejo</a></li>
            <li><a href="{% url 'informes_revisor' %}">Informes Auditor</a></li>
            <li><a href="{% url 'lista_procesos_juridicos' %}">Procesos Jurídicos</a></li>
            <li class="active" ><a  href="{% url 'main' %}">Regresar</a></li>
            <li><a href="{% url 'logout' %}">Cerrar Sesión</a></li>
          </ul>
        </div>
      </nav>
      
    </div>

    <ul class="sidenav" id="mobile-demo">
      <li><a href="{% url 'activos_fijos' %}">Activos Fijos</a></li>
      <li><a href="{% url 'proveedores' %}">Proveedores</a></li>
      <li><a href="{% url 'autorizaciones' id=1 %}">Autorizaciones</a></li>
      <li><a href="{% url 'pqr_administrador' %}">PQR</a></li>
      <li><a href="{% url 'pagina_consejo' %}">Consejo</a></li>
      <li><a href="{% url 'informes_revisor' %}">Informes Auditor</a></li>
      <li><a href="{% url 'lista_procesos_juridicos' %}">Procesos Jurídicos</a></li>
      <li class="active" ><a  href="{% url 'main' %}">Regresar</a></li>
      <li><a href="{% url 'logout' %}">Cerrar Sesión</a></li>
    </ul>
    <div><h6 style="color:black;background-color: gold;width: 200px;margin-left: 20px;border-radius: 25px;height:30px;padding-top:2px;padding-left:10px;text-align: center;box-shadow: 10px 5px 5px black;
      ">Usuario:{{request.user.username}}</h6></div>
</body>

<div class="main-container">
  <div style="color:black" class="heading">
    <h4 style="font-family: 'Times New Roman';" class="heading__title">Pendientes</h4>
    <!-- <p class="heading__credits"><a class="heading__link" target="_blank" href="https://dribbble.com/sl">Design by Simon Lurwer on Dribbble</a></p> -->
  </div>
  <div class="cards">
    <div id="card1" class="card card-1">
      <div style="display:flex;flex-direction: row;"> 
      <div class="card__icon"><i class="material-icons">mood_bad</i></div>
      <p style="transform: translate(30hw);color:black;font-weight: 600;" class="card__exit"><i>PQR</i></p>
      </div>
      <table>
        {% load pqr %}
        {% get_pqr_list as pqr_list %}
        {% if pqr_list %}
        {% for pqr in pqr_list %}
        <tr style="height:auto ;">
          <td ><li><a style="color:blue;" href="{% url 'pqr' id=request.user.id %}" class="link">{{pqr.title}}</a></li></td>
        </tr>  
        {% endfor %}
        {% endif %}
      </table>
    </div>
    <div id="card2" class="card card-2">
      <div style="display:flex;flex-direction: row;"> 
      <div class="card__icon"><i class="material-icons">construction</i></div>
      <p style="transform: translate(30hw);color:black;font-weight: 600;" class="card__exit"><i>Mantenimientos</i></p>
      </div>
      <table>
        {% load mantenimientos %}
        {% get_mantenimientos_list as mantenimientos_list %}
        {% if mantenimientos_list %}
        {% for mantenimiento in mantenimientos_list %}
        <tr style="height:auto;display:flexbox;flex-direction:row;">
          <td><li><a style="color:blue;" href="{% url 'activos_fijos_uno' mantenimiento.id %}" class="link">{{mantenimiento.nombre}}==>Días sin Mant.:{{mantenimiento.dias_sin_mantenimiento}}</a></li></td>
        </tr>  
        {% endfor %}
        {% endif %}
      </table>
    </div>
    <div id="card3" class="card card-3">
      <div style="display:flex;flex-direction: row;"> 
      <div class="card__icon"><i class="material-icons">gavel</i></div>
      <p style="transform: translate(30hw);color:black;font-weight: 600;" class="card__exit"><i>Procesos Jurídicos</i></p>
      </div>
      <table>
        {% load pqr %}
        {% get_pqr_list as pqr_list %}
        {% if pqr_list %}
        {% for pqr in pqr_list %}
        <tr style="height:auto ;">
          <td ><li><a style="color:blue;" href="{% url 'pqr' id=request.user.id %}" class="link">{{pqr.title}}</a></li></td>
        </tr>  
        {% endfor %}
        {% endif %}
      </table>
    </div>
    <div id="card3" class="card card-4">
      <div style="display:flex;flex-direction: row;"> 
      <div class="card__icon"><i class="material-icons">gavel</i></div>
      <p style="transform: translate(30hw);color:black;font-weight: 600;" class="card__exit"><i>Contratos</i></p>
      </div>
      <table>
        {% load contratos %}
        {% get_contratos_list as contratos_list %}
        {% if contratos_list %}
        {% for contrato in contratos_list %}
        <tr style="height:auto ;">
          <td ><li><a style="color:blue;" href="{% url 'contratos_proveedor' contrato.proveedor_id %}" class="link">{{contrato.numero}}-{{contrato.proveedor}}==>Días Vence:{{contrato.dias_vence}}</a></li></td>
        </tr>  
        {% endfor %}
        {% endif %}
      </table>
    </div>
  </div>  
</div>

<div class="main-container">
  <div style="color:black" class="heading">
    <h4 style="font-family: 'Times New Roman';" class="heading__title">Actividades Recientes</h4>
    <!-- <p class="heading__credits"><a class="heading__link" target="_blank" href="https://dribbble.com/sl">Design by Simon Lurwer on Dribbble</a></p> -->
  </div>
  <div class="cards">
    <table>
        <tr>
          
          <td>
            <div class="card card-2">
              <img style="transform: translate(-15px);margin-top: -49px;" src="static/img/chinche.jpg" alt="" width="30" height="30"/>
              <div style="display:flex;flex-direction: row;">
              <div class="card__icon"><i class="material-icons">gavel</i></div>
              <p class="card__exit"><i>Legislación</i></p>
              </div>
              <table>
                {% load page_extras %}
                {% get_legislacion_list as legislacion_list %}
                {% if legislacion_list %}
                {% for legislacion in legislacion_list %}
                  <tr style="height:auto ;">
                    <td ><li ><a style="color:rgb(2, 7, 2);" href="{% url 'legislacion' %}" class="link">{{legislacion.title}}</a></li></td>
                  </tr>  
                {% endfor %}
                {% endif %}
              </table>
            </div>
          </td>
          <td>  
            <div class="card card-3">
              <img style="transform: translate(-15px);margin-top: -49px;" src="static/img/chinche.jpg" alt="" width="30" height="30"/>
              <div style="display:flex;flex-direction: row;">
              <div class="card__icon"><i class="material-icons">podcasts</i></div>
              <p class="card__exit"><i>Comunicados</i></p>
              </div>
              <table>
                {% load page_extras %}
                {% get_comunicados_list as comunicado_list %}
                {% if comunicados_list %}
                {% for comunicado in comunicados_list %}
                  <tr style="height:auto;">
                    <td ><li ><a style="color:blue;" href="{% url 'main' %}" class="link">{{comunicado.title}}</a></li></td>
                  </tr>  
                {% endfor %}
                {% endif %}
              </table>
            </div>  
          </td>
        </tr>          
    </table>
  </div>
</div>  




{% block javascript %}
<script>
  $( document ).ready(function(){
       $('.sidenav').sidenav();
       $('.collapsible').collapsible();
       $(".dropdown-trigger").dropdown({ hover: true });
  });

  jQuery(document).ready(function(e) {
  $.ajax({
        url: "{% url 'contar_registros_pendientes_administrador' %}",
        method: "GET",
        dataType: 'json',
        success: function (data) {
        var cantidad =  data.num_clas
        var lineas = cantidad*90
        var slineas = lineas.toString();
        slineas = slineas+'px'
        document.getElementById('card1').style.height=slineas;
        var cantidad =  data.num_leg
        var lineas = cantidad*90
        var slineas = lineas.toString();
        slineas = slineas+'px'
        document.getElementById('card2').style.height=slineas;
        var cantidad =  data.num_not
        var lineas = cantidad*90
        var slineas = lineas.toString();
        slineas = slineas+'px'
        document.getElementById('card3').style.height=slineas;
        var cantidad =  data.num_pqr
        var lineas = cantidad*90
        var slineas = lineas.toString();
        slineas = slineas+'px'
        /* document.getElementById('card4').style.height=slineas;
        var cantidad =  data.num_autor
        var lineas = cantidad*90
        var slineas = lineas.toString();
        slineas = slineas+'px'
        document.getElementById('card5').style.height=slineas;
        var cantidad =  data.num_autor_abnb
        var lineas = cantidad*90
        var slineas = lineas.toString();
        slineas = slineas+'px'
        document.getElementById('card6').style.height=slineas; */
        }
  });
  });

 </script>  

{% endblock javascript%} 
{% endblock %}

